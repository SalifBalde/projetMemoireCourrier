<!-- Template HTML - reception-e-commerce.component.html
<p-table [value]="ecommerce$ | async" dataKey="code" [tableStyle]="{ 'min-width': '50rem' }" #dt>
  <ng-template pTemplate="header">
    <tr>
      <th>
        <p-tableHeaderCheckbox [table]="dt"></p-tableHeaderCheckbox>
      </th>
      <th>Numéro d'envoi</th>
      <th>Nom complet client</th>
      <th>Téléphone</th>
      <th>Destination</th>
      <th>Adresse Client</th>
      <th>Date</th>
    </tr>
  </ng-template>

  <ng-template pTemplate="body" let-ecommerce>
    <tr>
      <td>
        <p-tableCheckbox [value]="ecommerce" (onChange)="onSelectColis(ecommerce)" [selected]="isSelected(ecommerce)"/>
      </td>
      <td>{{ ecommerce.numEnvoi }}</td>
      <td>{{ ecommerce.prenomClient }} {{ ecommerce.nomClient }}</td>
      <td>{{ ecommerce.telephoneClient }}</td>
      <td>{{ ecommerce.adresseClient }}</td>
      <td>{{ ecommerce.date | date: 'short' }}</td>
    </tr>
  </ng-template>
</p-table> -->
<form [formGroup]="form" (ngSubmit)="saveReception()">
  <div class="grid">
    <div class="col-12">
      <div class="card px-6 py-6">
        <h4>Liste des colis à réceptionner</h4>
        <p-table [value]="ecommerce$" [(selection)]="selectedEcommerce" dataKey="id" [tableStyle]="{'min-width': '50rem'}">
          <ng-template pTemplate="header">
            <tr>
              <th style="width: 4rem"><p-tableHeaderCheckbox /></th>
              <th>Numéro d'envoi</th>
              <th>Nom complet client</th>
              <th>Téléphone</th>
              <th>Destination</th>
              <th>Adresse Client</th>
              <th>Date</th>
              <th></th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-ecommerce>
            <tr>
              <td>
                <p-tableCheckbox [value]="ecommerce" />
              </td>
              <td>{{ ecommerce.numEnvoi }}</td>
              <td>{{ ecommerce.prenomClient }} {{ ecommerce.nomClient }}</td>
              <td>{{ ecommerce.telephoneClient }}</td>
              <td>{{ ecommerce.adresseClient }}</td>
              <td>{{ ecommerce.date | date: 'short' }}</td>
              <td>
                <button pbutton pripple class=" p-button p-component p-button-text p-button-icon-only p-button-success"
                  (click)="openDialog(ecommerce)"><span class="p-button-icon pi pi-check"
                    aria-hidden="true"></span></button>
              </td>
            </tr>
          </ng-template>
        </p-table>
        <!--  <div class="col-12 flex flex-column lg:flex-row justify-content-end align-items-center">
                  <button pbutton="" pripple="" class="p-element p-button-primary lg:w-auto flex-order-1  p-button p-component"  [disabled]="form.invalid">
                      <span class="p-button-icon p-button-icon-left pi pi-fw pi-check"></span><span class="p-button-label">Sauvegarder</span>
                  </button>
              </div> -->
      </div>

    </div>

  </div>

</form>

<p-dialog [(visible)]="openEcommerceDialog" header="Confirmer" [modal]="true" [style]="{width:'450px'}">
  <div class="flex align-items-center justify-content-center">
    <i class="pi pi-exclamation-triangle mr-3" style="font-size: 2rem"></i>
    <span *ngIf="ecommerce">Etes-vous sûr que vous voulez réceptionner <b>{{ecommerce.id}}</b>?</span>
  </div>
  <ng-template pTemplate="footer">
    <button pButton pRipple icon="pi pi-times" class="p-button-text" label="Non"
      (click)="openEcommerceDialog = false"></button>
    <button pButton pRipple icon="pi pi-check" class="p-button-text p-button-danger" label="Oui"
      (click)="confirmReception()"></button>
  </ng-template>
</p-dialog>

<div *ngIf="loading" class="loading-message">
  <p>Chargement, veuillez patienter...</p>
            
</div>